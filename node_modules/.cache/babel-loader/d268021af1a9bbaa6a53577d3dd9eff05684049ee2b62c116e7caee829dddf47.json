{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport { BaseSpinner } from '@/components';\nimport { RATING_MESSAGES } from '@/constants/content';\nexport default {\n  name: 'LazyImage',\n  components: {\n    BaseSpinner\n  },\n  props: {\n    src: {\n      type: String,\n      required: true\n    },\n    alt: {\n      type: String,\n      default: ''\n    },\n    placeholder: {\n      type: String,\n      default: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMSIgaGVpZ2h0PSIxIiB2aWV3Qm94PSIwIDAgMSAxIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cmVjdCB3aWR0aD0iMSIgaGVpZ2h0PSIxIiBmaWxsPSIjRjVGN0ZBIi8+Cjwvc3ZnPgo='\n    },\n    showSpinner: {\n      type: Boolean,\n      default: true\n    },\n    errorMessage: {\n      type: String,\n      default: RATING_MESSAGES.NO_COMMENT\n    }\n  },\n  data() {\n    return {\n      isLoaded: false,\n      hasError: false,\n      observer: null\n    };\n  },\n  mounted() {\n    this.setupIntersectionObserver();\n  },\n  beforeDestroy() {\n    if (this.observer) {\n      this.observer.disconnect();\n    }\n  },\n  methods: {\n    setupIntersectionObserver() {\n      this.observer = new IntersectionObserver(entries => {\n        entries.forEach(entry => {\n          if (entry.isIntersecting) {\n            this.loadImage();\n            this.observer.unobserve(entry.target);\n          }\n        });\n      }, {\n        rootMargin: '50px 0px',\n        threshold: 0.01\n      });\n      this.observer.observe(this.$refs.image);\n    },\n    loadImage() {\n      const img = new Image();\n      img.onload = () => {\n        this.isLoaded = true;\n      };\n      img.onerror = () => {\n        this.hasError = true;\n      };\n      img.src = this.src;\n    },\n    onImageLoad() {\n      this.isLoaded = true;\n    },\n    onImageError() {\n      this.hasError = true;\n    }\n  }\n};","map":{"version":3,"names":["BaseSpinner","RATING_MESSAGES","name","components","props","src","type","String","required","alt","default","placeholder","showSpinner","Boolean","errorMessage","NO_COMMENT","data","isLoaded","hasError","observer","mounted","setupIntersectionObserver","beforeDestroy","disconnect","methods","IntersectionObserver","entries","forEach","entry","isIntersecting","loadImage","unobserve","target","rootMargin","threshold","observe","$refs","image","img","Image","onload","onerror","onImageLoad","onImageError"],"sources":["src/components/atoms/LazyImage.vue"],"sourcesContent":["<template>\n  <div class=\"lazy-image-container\" :class=\"{ 'loaded': isLoaded, 'error': hasError }\">\n    <img\n      v-if=\"!hasError\"\n      :src=\"isLoaded ? src : placeholder\"\n      :alt=\"alt\"\n      :class=\"['lazy-image', { 'loaded': isLoaded }]\"\n      @load=\"onImageLoad\"\n      @error=\"onImageError\"\n      ref=\"image\"\n    />\n    <div v-else class=\"image-error\">\n      <span>{{ errorMessage }}</span>\n    </div>\n    <div v-if=\"!isLoaded && !hasError\" class=\"image-placeholder\">\n      <BaseSpinner v-if=\"showSpinner\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { BaseSpinner } from '@/components'\nimport { RATING_MESSAGES } from '@/constants/content'\n\nexport default {\n  name: 'LazyImage',\n  components: {\n    BaseSpinner\n  },\n  props: {\n    src: {\n      type: String,\n      required: true\n    },\n    alt: {\n      type: String,\n      default: ''\n    },\n    placeholder: {\n      type: String,\n      default: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMSIgaGVpZ2h0PSIxIiB2aWV3Qm94PSIwIDAgMSAxIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cmVjdCB3aWR0aD0iMSIgaGVpZ2h0PSIxIiBmaWxsPSIjRjVGN0ZBIi8+Cjwvc3ZnPgo='\n    },\n    showSpinner: {\n      type: Boolean,\n      default: true\n    },\n    errorMessage: {\n      type: String,\n      default: RATING_MESSAGES.NO_COMMENT\n    }\n  },\n  data() {\n    return {\n      isLoaded: false,\n      hasError: false,\n      observer: null\n    }\n  },\n  mounted() {\n    this.setupIntersectionObserver()\n  },\n  beforeDestroy() {\n    if (this.observer) {\n      this.observer.disconnect()\n    }\n  },\n  methods: {\n    setupIntersectionObserver() {\n      this.observer = new IntersectionObserver(\n        (entries) => {\n          entries.forEach(entry => {\n            if (entry.isIntersecting) {\n              this.loadImage()\n              this.observer.unobserve(entry.target)\n            }\n          })\n        },\n        {\n          rootMargin: '50px 0px',\n          threshold: 0.01\n        }\n      )\n      \n      this.observer.observe(this.$refs.image)\n    },\n    loadImage() {\n      const img = new Image()\n      img.onload = () => {\n        this.isLoaded = true\n      }\n      img.onerror = () => {\n        this.hasError = true\n      }\n      img.src = this.src\n    },\n    onImageLoad() {\n      this.isLoaded = true\n    },\n    onImageError() {\n      this.hasError = true\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.lazy-image-container {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  min-height: 80px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #f5f7fa;\n  border-radius: 4px;\n  overflow: hidden;\n\n  .lazy-image {\n    width: 100%;\n    height: 100%;\n    object-fit: contain;\n    transition: opacity 0.3s ease;\n    opacity: 0;\n\n    &.loaded {\n      opacity: 1;\n    }\n  }\n\n  .image-placeholder {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .image-error {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n    color: #6c757d;\n    font-size: 12px;\n    text-align: center;\n    padding: 8px;\n  }\n\n  &.loaded {\n    background-color: transparent;\n  }\n\n  &.error {\n    background-color: #f8f9fa;\n    border: 1px solid #dee2e6;\n  }\n}\n</style> "],"mappings":";;AAqBA,SAAAA,WAAA;AACA,SAAAC,eAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IACAH;EACA;EACAI,KAAA;IACAC,GAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,QAAA;IACA;IACAC,GAAA;MACAH,IAAA,EAAAC,MAAA;MACAG,OAAA;IACA;IACAC,WAAA;MACAL,IAAA,EAAAC,MAAA;MACAG,OAAA;IACA;IACAE,WAAA;MACAN,IAAA,EAAAO,OAAA;MACAH,OAAA;IACA;IACAI,YAAA;MACAR,IAAA,EAAAC,MAAA;MACAG,OAAA,EAAAT,eAAA,CAAAc;IACA;EACA;EACAC,KAAA;IACA;MACAC,QAAA;MACAC,QAAA;MACAC,QAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,yBAAA;EACA;EACAC,cAAA;IACA,SAAAH,QAAA;MACA,KAAAA,QAAA,CAAAI,UAAA;IACA;EACA;EACAC,OAAA;IACAH,0BAAA;MACA,KAAAF,QAAA,OAAAM,oBAAA,CACAC,OAAA;QACAA,OAAA,CAAAC,OAAA,CAAAC,KAAA;UACA,IAAAA,KAAA,CAAAC,cAAA;YACA,KAAAC,SAAA;YACA,KAAAX,QAAA,CAAAY,SAAA,CAAAH,KAAA,CAAAI,MAAA;UACA;QACA;MACA,GACA;QACAC,UAAA;QACAC,SAAA;MACA,CACA;MAEA,KAAAf,QAAA,CAAAgB,OAAA,MAAAC,KAAA,CAAAC,KAAA;IACA;IACAP,UAAA;MACA,MAAAQ,GAAA,OAAAC,KAAA;MACAD,GAAA,CAAAE,MAAA;QACA,KAAAvB,QAAA;MACA;MACAqB,GAAA,CAAAG,OAAA;QACA,KAAAvB,QAAA;MACA;MACAoB,GAAA,CAAAjC,GAAA,QAAAA,GAAA;IACA;IACAqC,YAAA;MACA,KAAAzB,QAAA;IACA;IACA0B,aAAA;MACA,KAAAzB,QAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}